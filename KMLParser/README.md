# KML Parser for the IACM App

This is a KML Parser that parses given KML files (generated by Google MyMaps) and converts them to Objective-C code. This output can then be copy pasted into the app source code, allowing for easy modifications of the buildings using Google MyMaps graphical editor and the ability to manipulate and containerize it in code.


## How to use KML parser:

1. Go to the google map you want to parse and click on the three vertical dots and select “Export to KML/KMZ” (Figure 1). Make sure to select “Buildings” and check the box “Export as KML instead of KMZ. Does not support all icons” (Figure 2).

![Figure 1](https://github.rcac.purdue.edu/EPICSGroup/Interactive-and-Accessible-Campus-Map/blob/master/KMLParser/readme_doc_imgs/Export_MyMaps.png)
<br>
<sub>Figure 1</sub>

![Figure 2](https://github.rcac.purdue.edu/EPICSGroup/Interactive-and-Accessible-Campus-Map/blob/master/KMLParser/readme_doc_imgs/Export_2.png)
<br>
<sub>Figure 2</sub>

2. Doing this you will get a file in KML format. Move this downloaded file to the same folder as the python script KMLParser.py. Convert the KML file to a .txt file, to do this right click on the file and click “Rename” and make sure to change the extension from .kml to .txt. You can name the .txt file whatever you want but I encourage you to name it “UnParsedBuildings.txt”, if you want to have a different name you must change the first line on the python main function to whatever you named it (highlighted in blue figure 3).

![Figure 3](https://github.rcac.purdue.edu/EPICSGroup/Interactive-and-Accessible-Campus-Map/blob/master/KMLParser/readme_doc_imgs/FileName.png)
<br>
<sub>Figure 3</sub>

3. Once you have made sure that the names are exactly the same (case sensitive) then you just need to run the python script. I use the Pycharm IDE so you just select “Run” and then select “Run ‘KMLParser’” (shown in figure 4). If you do not have Pycharm and have access to a Linux machine you can use the following commands to run the python script the same way (figure 5). 

![Figure 4](https://github.rcac.purdue.edu/EPICSGroup/Interactive-and-Accessible-Campus-Map/blob/master/KMLParser/readme_doc_imgs/Run.png)
<br>
<sub>Figure 4</sub>

![Figure 5](https://github.rcac.purdue.edu/EPICSGroup/Interactive-and-Accessible-Campus-Map/blob/master/KMLParser/readme_doc_imgs/terminal.png)
<br>
<sub>Figure 5</sub>

4. Once you have done that you can see a new txt file has been created called “ParsedBuildings.txt”, this is the output of the python script and is what you need to copy and paste into the Map App to display the buildings. This works as of 4/21/2020 but updates to the KMLParser.py could cause this guide to change slightly.

## Authors

Parser Developed by Matthew Bolda (Computer Engineering)
